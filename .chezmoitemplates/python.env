{{- /*
     * On Linux, Python puts user's binaries in "~/.local/bin", which is already
     * included in $PATH; it makes no sense to add it here.
     */}}
{{-    if eq $.chezmoi.os "darwin" }}
{{-      $pythonVersionsDir := joinPath (env "HOME") "Library" "Python" }}
{{-      if stat $pythonVersionsDir }}

# Load the included Python runtimes.
{{-        $pythonVersions := output "ls" "-1" $pythonVersionsDir | splitList "\n" | compact }}
{{-        $paths := list }}
{{-        range $v := $pythonVersions | reverse }}
{{-          $paths = append $paths (joinPath $pythonVersionsDir $v "bin" | quote) }}
{{-        end }}
path-append {{ $paths | join " " }}
{{-      end }}
{{-    end }}

# See also:
# - https://docs.python.org/3/using/cmdline.html#environment-variables

PYTHONCACHE=1
PYTHONGLOBALREQUIREMENTFILES+=( "${HOME}/.local/lib/python/requirement.txt" )

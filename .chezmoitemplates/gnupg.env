{{- if eq .chezmoi.os "linux" }}

# Avoid issues with interactive prompts on the command line.
: "${GPG_TTY:=$(tty)}"
export GPG_TTY

{{- end }}


{{- /*
     * Use `gpgconf` binary's absolute path.
     * This fixes an issue with darwin and MacGPG2.
     */}}

{{-    if and
         (lookPath "gpg-agent")
         (lookPath "ssh-agent") }}
{{-      $gpgconf_bin := lookPath "gpg-agent" }}

# Integrate with ssh-agent.
export SSH_AUTH_SOCK="$( {{- $gpgconf_bin }} --list-dirs agent-ssh-socket)"
{{ $gpgconf_bin }} --launch gpg-agent

{{- end }}
